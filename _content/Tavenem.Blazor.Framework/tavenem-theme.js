var e;!function(e){e[e.Auto=0]="Auto",e[e.Light=1]="Light",e[e.Dark=2]="Dark"}(e||(e={}));const t=[];let n,o=!1;function a(e){const n=t.indexOf(e);n>=0&&t.splice(n,1)}function r(){if(o&&n)return n;const t=localStorage.getItem("tavenem-theme");if(t){const n=parseInt(t);if(n==e.Light||n==e.Dark)return n}return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?e.Dark:e.Light}function i(e){t.push(e)}function c(a,i){if(i)o=a!=e.Auto;else if(localStorage.removeItem("tavenem-theme"),o)return;if(n=a,a==e.Auto&&(a=r()),a==e.Dark?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.setAttribute("data-theme","light"),i&&localStorage.setItem("tavenem-theme",a.toString()),t.length)for(let e of t)e.invokeMethodAsync("NotifyThemeChanged",a)}if(window.matchMedia){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(){c(r())}))}const m=r();m==e.Dark&&c(m);export{a as cancelListener,r as getPreferredColorScheme,i as listenForThemeChange,c as setColorScheme};
//# sourceMappingURL=tavenem-theme.js.map
